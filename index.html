<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="./vue.js"></script>
  <title>Vue.js</title>
</head>
<body>

  <div id="app">
    
    <ul>
      <li v-for="item in items"><a :href="item.link" @click.prevent="getData">{{item.name}}</a></li>
    </ul>

    <h1>Nome: {{current.companyName}}</h1>
    <h2>Último Preço: {{current.latestPrice}}</h2>
    <h3>Preço de Mercado: {{current.marketCap}}</h3>
  </div>

<!-- 
  Utilizando a API https://sandbox.iexapis.com/stable/stock/AAPL/quote?token=Tpk_13c3e0d9c3be456a9fda4725f18bdc2c

  Adicione um evento de clique a cada a do html acima e previna o comportamento padrão

  Faça o fetch dos dados do href ao click e mostre na interface o companyName, latestPrice, marketCap -->

  <script>
    vm = new Vue({
      el: "#app",
      data: {
        items: [ {
          name: "Google",
          link: 'https://sandbox.iexapis.com/stable/stock/AAPL/quote?token=Tpk_13c3e0d9c3be456a9fda4725f18bdc2c'
        },
        {
          name: "Apple",
          link: 'https://sandbox.iexapis.com/stable/stock/GOOGL-AF/quote?token=Tpk_13c3e0d9c3be456a9fda4725f18bdc2c'
        },
        {
          name: "Amazon",
          link: 'https://sandbox.iexapis.com/stable/stock/AMZO34-BS/quote?token=Tpk_13c3e0d9c3be456a9fda4725f18bdc2c'
        },
        {
          name: "Ebay",
          link: 'https://sandbox.iexapis.com/stable/stock/EBAY-MM/quote?token=Tpk_13c3e0d9c3be456a9fda4725f18bdc2c'
        },
        {
          name: "Paypal",
          link: 'https://sandbox.iexapis.com/stable/stock/PYPL-AF/quote?token=Tpk_13c3e0d9c3be456a9fda4725f18bdc2c' 
        }],
        current: {
          companyName: "",
          latestPrice: 0,
          marketCap: 0,
        }
      },
      methods: {
        getData(event) {
          url = event.currentTarget.href
          fetch(url)
          .then(r => r.json())
          .then(json => {
            this.current.companyName = json.companyName;
            this.current.latestPrice = json.latestPrice;
            this.current.marketCap = json.marketCap;
          })
        }
      }

    })
  </script>

</body>
</html>